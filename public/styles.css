/* Simple Blue/Orange Theme â€” FLEX layout so header/input never overlap messages */

:root{
  --blue:#0b79ff; --orange:#f58a00; --violet:#8e44ad; --green:#31aa22; --red:#ff1f4b;
  --bg:#fff; --text:#0f172a; --muted:#6b7280; --border:#e5e7eb;
  --tap:44px; --gap:10px;
  --kb-safe-bottom: env(safe-area-inset-bottom, 0px);
  --input-h: 56px; /* updated from JS to match actual input height */
}

*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0; background:var(--bg); color:var(--text);
  font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;

  /* Key: page itself doesn't scroll; the messages pane does */
  min-height:100dvh; display:flex; flex-direction:column; overflow:hidden;
}

/* ---------- Header (kept as you had it) ---------- */
.bar{
  display:flex; align-items:center; justify-content:space-between;
  background:var(--blue); color:#fff; min-height:48px; padding:8px 10px; gap:8px; flex-wrap:wrap;
  /* sticky is now optional because the page doesn't scroll; keep it for safety */
  position:sticky; top:0; z-index:1;
}
.bar .left,.bar .right{ display:flex; align-items:center; gap:8px; flex-wrap:wrap; }

.brand{ display:flex; align-items:center; gap:6px; margin-right:6px; }
.brand .dot{ width:22px; height:22px; border-radius:4px; background:#fff; display:inline-block; }
.brand-text{ color:#fff; font-weight:800; }

.btn{
  appearance:none; border:none; border-radius:6px; height:34px; padding:0 12px;
  color:#fff; font-weight:700; cursor:pointer; transition: transform .04s ease, opacity .15s ease;
}
.btn:hover{ opacity:.95; } .btn:active{ transform: translateY(1px); }
.btn.orange{ background:var(--orange); } .btn.violet{ background:var(--violet); }
.btn.red{ background:var(--red); } .btn.green{ background:var(--green); } .btn.blue{ background:var(--blue); }
.btn.outline{ background:transparent; border:2px solid rgba(255,255,255,.9); color:#fff; }

.badge{ background:#fff; color:#1f2937; padding:6px 10px; border-radius:999px; font-weight:700; border:2px solid rgba(255,255,255,.6); }
.dropdown{ display:flex; align-items:center; gap:6px; color:#fff; }
.dropdown label{ font-weight:700; }
.dropdown select{ height:32px; border-radius:6px; border:1px solid #fff; background:#fff; color:#111; padding:0 8px; }

/* ---------- Main canvas: FLEX column; messages pane scrolls ---------- */
.canvas{
  flex:1; display:flex; flex-direction:column; min-height:0; /* min-height:0 is critical for overflow children */
  background:#fff;
}

/* Messages: the ONLY scroll container */
.messages{
  flex:1; min-height:0;
  overflow:auto; padding:14px; display:flex; flex-direction:column; gap:16px;

  /* Smooth scrolling + prevent body bounce */
  scroll-behavior:smooth; overscroll-behavior:contain;

  /* Leave space so last message never hides under the input */
  padding-bottom: calc(16px + var(--input-h));
}

/* System strips */
.msg.strip{ padding:12px 14px; border-radius:4px; color:#fff; font-weight:700; }
.strip.violet{ background:var(--violet); } .strip.green{ background:var(--green); }

/* Chat rows */
.row{ display:flex; flex-direction:column; gap:6px; }
.row .meta{ display:flex; align-items:center; gap:10px; color:var(--muted); font-weight:700; font-size:14px; }
.row .meta .who.you{ color:var(--blue); } .row .meta .who.stranger{ color:var(--orange); }
.row .meta .time{ opacity:.8; font-weight:600; }

.bubble{ display:flex; align-items:flex-start; gap:10px; }
.bubble .bar{ width:6px; height:26px; border-radius:2px; margin-top:2px; }
.bubble .text{ font-weight:700; }
.row.you  .bar{ background:var(--blue); }     .row.you  .text{ color:var(--blue); }
.row.stranger .bar{ background:var(--orange); }.row.stranger .text{ color:var(--orange); }

/* Typing indicator just above the input */
.typing{ color:#f59e0b; padding:4px 14px; font-weight:700; }

/* Bottom input (in flow; no overlap) */
.bottom{
  display:flex; align-items:center; gap:10px; padding:10px; border-top:1px solid var(--border); background:#fff;
  /* sit above mobile keyboard if needed */
  padding-bottom: calc(10px + var(--kb-safe-bottom));
}
.bottom input{
  flex:1; min-height:40px; border:2px solid var(--green); border-radius:4px; padding:0 10px; font-size:16px;
}
.bottom .send{ min-height:40px; border-radius:4px; font-weight:800; background:var(--green); color:#fff; border:none; }

/* ---------- Responsive tweaks ---------- */
@media (max-width:720px){
  .brand{ width:100%; margin:2px 0 6px; } .brand .dot{ width:18px; height:18px; }
  #btn-connect,#btn-next,#btn-block,#btn-exit,.badge{ flex:1 1 calc(50% - var(--gap)); min-height:var(--tap); font-size:16px; }
  .btn{ min-height:var(--tap); padding:0 14px; }
  .dropdown{ display:flex; } .dropdown select{ flex:1 1 160px; max-width:100%; min-height:var(--tap); }
  .bubble .text{ font-size:16px; line-height:1.45; }
}
@media (min-width:721px) and (max-width:1024px){
  .btn,.dropdown select{ min-height:40px; } .bubble .text{ font-size:16px; }
}

/* Focus ring */
:focus-visible{ outline:3px solid rgba(11,121,255,.35); outline-offset:2px; }
